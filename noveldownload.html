<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml' >
<head>
<meta http-equiv="Expires" content="0"> 
<meta http-equiv="Pragma" content="no-cache"> 
<meta http-equiv="Cache-control" content="no-cache"> 
<meta http-equiv="Cache" content="no-cache">
<meta name="full-screen" content="yes"/>
<META HTTP-EQUIV="Cache-Control" CONTENT="no-cache, must-revalidate"> 
<meta http-equiv="Content-Type" content="application/xhtml+xml;charset=utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
<title>小说下载</title>
<script src="script/jquery-1.8.0.js"></script>
<script src="script/shift.js"></script>
<script src="script/base.js"></script>
<script src="script/menu.js"></script>
<!-- <script src="novel.js"></script> -->
<script src="script/list.js"></script>
<script src="script/page.js"></script>
<script src="script/zipFile.js"></script>
<script src="script/Shelf.js"></script>
<script src="script/search.js"></script>
<script src="script/winObj.js"></script>
<!-- <script src="http://git.docfeng.top/novel.js"></script> -->
<link rel="stylesheet" href="css/main.css" type="text/css"></link> 
<link rel="stylesheet" href="css/test.css" type="text/css">

<style type='text/css'>
//小说
/*#novel_menu{width:100%;
	position:absolute; 
	Bottom:0px;
	display: none;
} */	
//table h3{font-size:10%;}

#novel_view_body{
	background: #666;
      width:100%;
      	height:572px;
      	overflow:hidden;
      	text-overflow:ellipsis;
      	white-space:inherit;
}
#novel_view_body_content{
	lineHeight:16px;
}
</style>
<body>
<div class="myhead" id="Mytitle" style="height:18px;"></div>
<div class="menu fix" id="menu">
    <ul data-index=0>
        <li>下载</li>
        <li>调试eval</li>
        <li>书架</li>
        <li>目录
          <ul>
            <li>6</li>
          </ul>
        </li>
    </ul>
 <!--0-->
    <div>
        <form id="form_1">
            目录地址:<input type="text" name="list_url" onchange="List.checkReg(this)">
            index<input type="text" name="index" value="0/0" size=2><br/>
            start:<input type="text" name="start" value=0 size=1>
            end:<input type="text" name="end" value=0 size=1>
            progress:<input type="text" name="progress" value="" size=4><br />
            <label onclick="search(novel_name.value);">小说名称:</label><input type="text" name="novel_name" onchange=""><br />
            最新章节:<input type="text" name="new_page"><br />
            本地章节:<input type="text" name="old_page"><br />
            <input type="button" value='下载' onclick="load.download2();"/>
            <input type="button" value='下载1' onclick="List.download();"/>
            <input type="radio" name="model" checked="checked" value="read">read
            <input type="radio" name="model" value="add">add
		          	<input type="radio" name="model" value="write">write 
		          	<br />
            <input type="button" value='获取目录' onclick="List.get();" />
            <input type="button" value='保存目录' onclick="List.write();" />
            <input type="button" value='保存书架' onclick="Shelf.set();" />
            <input type="button" value='epub' onclick='alert(fso.writeZip(form_1.novel_name.value+".epub","zip"))' />
            <input type=button value="打开" onclick="chrome.openFile(form_1.novel_name.value+'.epub')"/>
	           	<input type=button value="删除" onclick="fso.delete('zip/OPS')"/>
            <br />
            <input type="button" value='reload' onclick="document.location.reload();" />
            <input type="button" value='shiftDiv' onclick="shiftDiv(_reg);" />
            <div id="_reg" name="_reg" style="display:none">
                <input type="button" value="setReg" onclick="List.setReg();" />
                <input type="button" value="writeReg" onclick="List.writeReg();" />
                <br />
                link:<input type="text" name="link_reg"><br />
                name:<input type="text" name="name_reg"><br />
                page1:<input type="text" name="page1_reg"><br />
                page2:<input type="text" name="page2_reg"><br />
                章节名称:<input type="text" name="section_name"><br />
                章节正则:<input type="text" name="section_name_reg" value="title>.*?(第.*?)_.*?<\/title>"><br />
                章节序号:<input type="text" name="section_num"><br />
                下章地址:<input type="text" name="next_url"><br />
            </div>
            <table id="table_3" onclick="Novel.get_local_history(event.srcElement);"></table>
            <textarea name="txt1" ></textarea>
        </form>
    </div>
<!--1-->
    <div>
        <form id="form_2">
            <input type="button" value="eval" onclick="eval(form_2.txt1.value);" />
            <input type="button" value="eval_asp" onclick="eval_asp(form_2.txt1.value);" />
            <input type="button" value="evalsql_asp" onclick="evalsql_asp(form_2.txt1.value);" />
            <input type="button" value="重试" onclick="eval(fso.read('/下载/novel.js'));alert(true)" /><br />
            <textarea name="txt1" ></textarea>
            <input type="button" value="clear" onclick="console.clear();" />
            <textarea name="console1" ></textarea>
        </form>
    </div>
<!--2-->
    <div>
          <form id="form_3">
              <input type="button" value='set' onclick="Shelf.set()" />  
              <input type="button" value='get' onclick="Shelf.get()" /> 
              <input type="button" value='检查更新' onclick="Shelf.update()" />	
              <input type="button" value='删除' onclick="Shelf.tableFun=Shelf.del" />
              <table id="shelf_table" style="table-layout:fixed" onclick="Shelf.tableFun(event.srcElement);"></table>
          </form>
    </div>
    <div>
        <form id="form_4">
        <input type="button" value='write' onclick="List.write()" />  
        <input type="button" value='read' onclick="List.read()" /> 
        <div style="height:95%;overflow-x:hidden;overflow-y:auto;">
            <table id="list_table" onclick="alert(event.srcElement.parentNode.parentNode.rowIndex);"></table>
        </div>
        <div class="dropdown">
            <span>Mouse over me</span>
            <div class="dropdown-content">
                <p>Hello World!</p>
            </div>
        </div>
        </form>
    </div>
 <!--结束-->
</div>
<div class="alert">
  <div class="alert_head">
    <div class="alert_title">标题</div>
    <div class="alert_close">&#8855;</div>
  </div>
  <div class="alert_body">
    显示
  </div>
</div>
<script>
console=function(){}
console.prototype.clear=function(){
    form_2.console1.innerHTML="";
}
console.prototype.log=function(str){
    form_2.console1.innerHTML+=str+"\n";
}
console=new console();

window.onload=function(){
  //get_js(["menu.js","novel.js","list.js","zipFile.js","Shelf.js"]);
  menu_ini();
  List=new List();
  Shelf=new Shelf();
  zipFile=new zipFile();
  //Shelf.get();
  //n.resize();
}
	
window.onresize=function(){ 
   //n.resize();
}
window.onerror = function(sMessage, sUrl, sLine) {
     alert("发生错误！\n" + sMessage + "\nURL:" + sUrl + "\nLine Number:" + sLine);
     return true;
}
var _index=0;
var myLi,myDiv;


//window.addeventlistener("resize",function(){alert()},false);


get_html=function(url,fun){
	try{
    get(url,fun);
    }catch(e){alert(e);}
}


function show_novel_menu(){
  var dis=novel_menu.style;
  if(dis.display=="block")
    {dis.display="none";}
  else{dis.display="block";}
}
novel_cmd=function()
{
     var event = event || window.event;
     var h=window.innerHeight;
     var w=window.innerWidth;
     var x=event.clientX;
     var y=event.clientY;
     if((x>1/2*w&&y>2/3*h)||(x>2/3*w&&y>1/2*h)){
         n.go_page(1);
     }
     if((x<2/3*w&&y>1/2*h)||(x<1/2*w&&y>2/3*h)){
        n.go_page(-1);
     } 
    if(x>w/3&&x<2/3*w&&y>h/3&&y<2/3*h){
       //show_novel_menu();
       shift(4);
    }
}

get_js=function(arr,fun){	
	  var index=0
    arr.forEach(function(e){
        post(e,"",function(a){
            eval(a);
            index++;
            if(fun&&index==arr.length){
                fun()
            }
        });
     });
}


get_radio=function(obj){
    for(var i=0;i<obj.length;i++){
        if(obj[i].checked){
            return obj[i].value;
         }
     }
     return false;
}
 
shiftDiv=function(div){
    if(_reg.style.display==""||_reg.style.display=="block")
    {
        div.style.display="none";
    }else{
        div.style.display="block";
    } 
}
showData=function(data){
    if(data.html){form_1.txt1.value=data.html}
    if(data.name){form_1.novel_name.value=data.name}
    	if(data.name_reg){form_1.name_reg.value=data.name_reg}
    if(data.links){form_1.link_reg.value=data.links}
}

document.oncontextmenu=function() {
    event.returnValue=false;
    msg("当前设置不允许使用右键！");
}


eval_asp=function(txt){
  var url="http://fujianyixue.host3v.vip/eval.asp";
  post(url,"eval="+txt,function(txt){
    alert(txt)
  });
}

evalsql_asp=function(txt){
  var url="http://fujianyixue.host3v.vip/evalsql.asp";
  post(url,"eval="+txt,function(txt){
    alert(txt)
  });
}
</script>
</body>
</html>

















