<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta name="browsermode" content="application">
<meta name="screen-orientation" content="portrait">
<meta http-equiv="Content-Type" content="application/xhtml+xml;charset=utf-8" />
<meta name="x5-page-mode" content="app">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<meta http-equiv="Cache-Control" content="no-transform" /> 
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1" />

<style>
//div{ width:200px; height:200px; overflow:auto;}
input{height:32px}
</style>

</head>
<body >
<script>
var h;
window.onload=function(){
  ini_window();
  get_js("Reader_js_base.js");
  get_js("Reader_js_menu.js");
  get_js("Reader_js_control.js");
  d=document.getElementById("d");
  Shelf.getShelf();
  Read.hide();
  Shelf.show();
//try{chrome.hideMenu();}catch(e){alert(e)}
  window.onresize=function(){ ini_window();}
}
function nextPage(){
  Read.nextPage();
}

function ini_window(){
  d.style.lineHeight="16px";
  c.style.height=window.innerHeight-(window.innerHeight%16)-32+"px";
  h=c.offsetHeight;
  document.body.style.backgroundColor="green";
}

</script>
<div id="myMenu" style="display:none">
<div id="myMenu1" style="width:100%;position:absolute; Bottom:0px;">
  <input type="button" value="书架" 
    onclick='Shelf.show();Read.hide();Menu.hide()'></input>
  <input type="button" value="目录" 
    onclick='List.show();Read.hide();Menu.hide();'></input>
  <input type="button" value="关闭" 
    onclick='Menu.hide();'></input>
  <input type="button" value="ini" 
    onclick='ini_window();'></input>
  <input type="button" value="重载" 
    onclick='location.reload();'></input>
</div>
<div id="myMenu2" style="width:100%;height:350px;overflow:scroll;position:absolute;Bottom:30px;">
  <input type="button" value="全屏" 
 onclick='requestFullScreen(document.documentElement);'></input>
  <input type="button" value="跳转" 
onclick="alert()">
  <input type="button" value="初始化" 
onclick="ini_window()">
  <select name="str" onchange="alert(this.options[selectedIndex].text)">
  <option>add</option>
  <option>alert</option>
  <option>del</option>
  <option>all</option>
</select>
  <input type="button" value="eval" 
    onclick="eval(f.f_txt.value);">
  <div id=menu_body>
    <form id="f">
      <input type="text" name="f_key">
      <input type="text" name="f_val">

    <textarea name="f_txt"
       style='width:100%;height:220px'>  
    </textarea>
    </form>
  </div>
</div>
</div>

<div id="myReader" style="width:100%;height:100%;">
<div id=m onclick="_move()";>0/0</div>
<div id="c" onclick="_move()";
style='width:100%;height:608px;overflow:hidden;text-overflow:ellipsis;white-space:inherit;' >
   <div id=d>
     uuuui
   </div>
   <div id=e style="height:600px">
     uuuui
   </div>
</div>
</div>
</div>

<div id="myShelf" style="width:100%;height:572px;display:none">
<div id="myShelfHead"
>
<input type="txt" id="url" />
<input type="button" value="跳转" 
onclick="alert()" />
</div>
<div id="myShelfBody"
>
</div>
</div>

<div id="myList" style="width:100%;height:572px;display:none"
onclick="List.hide()">
</div>
<script>
get_js=function(js){
  /*post(js,"",function(a){
    eval(a);
    toast("","",js)
  });*/
  eval(fso.read("novel/"+js))
}
toast=function(a,b,c){
  a&&(toast.a=a);
  b&&(toast.b=b);
  c&&(toast.c=c);
  m.innerHTML=
    toast.a+"["+toast.b+"]["+toast.c+"]";
}
post=function(path,str,fun) {  
  var xmlHttp=null; 
  try { // Firefox, Opera 8.0+, Safari 
   xmlHttp=new XMLHttpRequest();
  }catch (e) { // Internet Explorer 
    try { 
    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); 
    }catch (e) { 
      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
      } 
    } 
  if (xmlHttp==null) { 
      alert ("您的浏览器不支持AJAX！"); 
       return; 
  }
  xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4) { 
     fun(xmlHttp.responseText)
    }else{fun2()}
  }
  xmlHttp.open("POST",path,true); 
  xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
  xmlHttp.send(str); 
  //xmlHttp=null;
}
get=function(path,fun) {  
  var xmlHttp=null; 
  try { // Firefox, Opera 8.0+, Safari 
   xmlHttp=new XMLHttpRequest();
  }catch (e) { // Internet Explorer 
    try { 
    xmlHttp=new ActiveXObject("Msxml2.XMLHTTP"); 
    }catch (e) { 
      xmlHttp=new ActiveXObject("Microsoft.XMLHTTP");
      } 
    } 
  if (xmlHttp==null) { 
      alert ("您的浏览器不支持AJAX！"); 
       return; 
  }
  xmlHttp.onreadystatechange=function(){
    if(xmlHttp.readyState==4) { 
     fun(xmlHttp.responseText)
    }else{fun2()}
  }
  xmlHttp.open("GET",path,true); 
  //xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded");
  xmlHttp.send(null); 
  //xmlHttp=null;
}
</script>
</body>
</html>
